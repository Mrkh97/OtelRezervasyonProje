{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport { enviroment } from 'src/environments/enviroment';\nimport { Il } from '../models/Il';\nimport { Otel } from '../models/Otel';\nimport { OtelKullanici } from '../models/OtelKullanici';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nexport class AppService {\n  constructor(http, router) {\n    this.http = http;\n    this.router = router;\n    this.kullanici = new BehaviorSubject(new OtelKullanici());\n    this.otel = new BehaviorSubject(new Otel());\n    this.iller = new BehaviorSubject([new Il()]);\n  }\n  ngOnInit() {\n    console.log(localStorage.getItem('user'));\n  }\n  login(otelKullanici) {\n    this.http.post(`${enviroment.api}/OtelKullanici/getOtelKullanici`, otelKullanici).subscribe(res => {\n      if (res.durum) {\n        console.log(res);\n        this.kullanici.next(res.data);\n        this.otel.next(res.data.otel);\n        localStorage.setItem('user', JSON.stringify(res.data));\n        this.router.navigate(['main']);\n      } else {}\n    });\n  }\n  signup(otelKullanici) {\n    this.http.post(`${enviroment.api}/OtelKullanici/addOtelKullanici`, otelKullanici).subscribe(res => {\n      console.log(res);\n      this.router.navigate(['login']);\n    });\n  }\n  logout() {\n    localStorage.removeItem('user');\n  }\n  updateOtel(otel) {\n    this.http.post(`${enviroment.api}/Otel/updateOtel`, otel).subscribe(res => console.log(res));\n  }\n  getIller() {\n    this.http.get(`${enviroment.api}/Il/getIller`).subscribe(res => {\n      this.iller.next(res.data);\n    });\n  }\n}\nAppService.ɵfac = function AppService_Factory(t) {\n  return new (t || AppService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.Router));\n};\nAppService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AppService,\n  factory: AppService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAGA,SAASA,eAAe,QAAQ,MAAM;AACtC,SAASC,UAAU,QAAQ,6BAA6B;AACxD,SAASC,EAAE,QAAQ,cAAc;AACjC,SAASC,IAAI,QAAQ,gBAAgB;AACrC,SAASC,aAAa,QAAQ,yBAAyB;;;;AAGvD,OAAM,MAAOC,UAAU;EAIrBC,YAAoBC,IAAgB,EAAUC,MAAc;IAAxC,SAAI,GAAJD,IAAI;IAAsB,WAAM,GAANC,MAAM;IAHpD,cAAS,GAAG,IAAIR,eAAe,CAAgB,IAAII,aAAa,EAAE,CAAC;IACnE,SAAI,GAAG,IAAIJ,eAAe,CAAO,IAAIG,IAAI,EAAE,CAAC;IAoC5C,UAAK,GAAG,IAAIH,eAAe,CAAO,CAAC,IAAIE,EAAE,EAAE,CAAC,CAAC;EAlCkB;EAE/DO,QAAQ;IACNC,OAAO,CAACC,GAAG,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;EAC3C;EAEAC,KAAK,CAACC,aAA4B;IAChC,IAAI,CAACR,IAAI,CACNS,IAAI,CAAC,GAAGf,UAAU,CAACgB,GAAG,iCAAiC,EAAEF,aAAa,CAAC,CACvEG,SAAS,CAAEC,GAAQ,IAAI;MACtB,IAAIA,GAAG,CAACC,KAAK,EAAE;QACbV,OAAO,CAACC,GAAG,CAACQ,GAAG,CAAC;QAChB,IAAI,CAACE,SAAS,CAACC,IAAI,CAACH,GAAG,CAACI,IAAI,CAAC;QAC7B,IAAI,CAACC,IAAI,CAACF,IAAI,CAACH,GAAG,CAACI,IAAI,CAACC,IAAI,CAAC;QAC7BZ,YAAY,CAACa,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACR,GAAG,CAACI,IAAI,CAAC,CAAC;QACtD,IAAI,CAACf,MAAM,CAACoB,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC;OAC/B,MAAM;IAET,CAAC,CAAC;EACN;EAEAC,MAAM,CAACd,aAA4B;IACjC,IAAI,CAACR,IAAI,CACNS,IAAI,CAAC,GAAGf,UAAU,CAACgB,GAAG,iCAAiC,EAAEF,aAAa,CAAC,CACvEG,SAAS,CAAEC,GAAG,IAAI;MACjBT,OAAO,CAACC,GAAG,CAACQ,GAAG,CAAC;MAChB,IAAI,CAACX,MAAM,CAACoB,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;IACjC,CAAC,CAAC;EACN;EAEAE,MAAM;IACJlB,YAAY,CAACmB,UAAU,CAAC,MAAM,CAAC;EACjC;EAIAC,UAAU,CAACR,IAAU;IACnB,IAAI,CAACjB,IAAI,CACNS,IAAI,CAAC,GAAGf,UAAU,CAACgB,GAAG,kBAAkB,EAAEO,IAAI,CAAC,CAC/CN,SAAS,CAAEC,GAAG,IAAKT,OAAO,CAACC,GAAG,CAACQ,GAAG,CAAC,CAAC;EACzC;EAEAc,QAAQ;IACN,IAAI,CAAC1B,IAAI,CAAC2B,GAAG,CAAC,GAAGjC,UAAU,CAACgB,GAAG,cAAc,CAAC,CAACC,SAAS,CAAEC,GAAQ,IAAI;MACpE,IAAI,CAACgB,KAAK,CAACb,IAAI,CAACH,GAAG,CAACI,IAAI,CAAC;IAC3B,CAAC,CAAC;EACJ;;AAlDWlB,UAAU;mBAAVA,UAAU;AAAA;AAAVA,UAAU;SAAVA,UAAU;EAAA+B,SAAV/B,UAAU;EAAAgC,YADG;AAAM","names":["BehaviorSubject","enviroment","Il","Otel","OtelKullanici","AppService","constructor","http","router","ngOnInit","console","log","localStorage","getItem","login","otelKullanici","post","api","subscribe","res","durum","kullanici","next","data","otel","setItem","JSON","stringify","navigate","signup","logout","removeItem","updateOtel","getIller","get","iller","factory","providedIn"],"sourceRoot":"","sources":["/Users/mohammadrezakhorasanchian/Development/Angular/Otel-Rezervasyon-Admin/src/app/services/App.service.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Injectable, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { BehaviorSubject } from 'rxjs';\nimport { enviroment } from 'src/environments/enviroment';\nimport { Il } from '../models/Il';\nimport { Otel } from '../models/Otel';\nimport { OtelKullanici } from '../models/OtelKullanici';\n\n@Injectable({ providedIn: 'root' })\nexport class AppService implements OnInit {\n  kullanici = new BehaviorSubject<OtelKullanici>(new OtelKullanici());\n  otel = new BehaviorSubject<Otel>(new Otel());\n\n  constructor(private http: HttpClient, private router: Router) {}\n\n  ngOnInit(): void {\n    console.log(localStorage.getItem('user'));\n  }\n\n  login(otelKullanici: OtelKullanici) {\n    this.http\n      .post(`${enviroment.api}/OtelKullanici/getOtelKullanici`, otelKullanici)\n      .subscribe((res: any) => {\n        if (res.durum) {\n          console.log(res);\n          this.kullanici.next(res.data);\n          this.otel.next(res.data.otel);\n          localStorage.setItem('user', JSON.stringify(res.data));\n          this.router.navigate(['main']);\n        } else {\n        }\n      });\n  }\n\n  signup(otelKullanici: OtelKullanici) {\n    this.http\n      .post(`${enviroment.api}/OtelKullanici/addOtelKullanici`, otelKullanici)\n      .subscribe((res) => {\n        console.log(res);\n        this.router.navigate(['login']);\n      });\n  }\n\n  logout() {\n    localStorage.removeItem('user');\n  }\n\n  iller = new BehaviorSubject<[Il]>([new Il()]);\n\n  updateOtel(otel: Otel) {\n    this.http\n      .post(`${enviroment.api}/Otel/updateOtel`, otel)\n      .subscribe((res) => console.log(res));\n  }\n\n  getIller() {\n    this.http.get(`${enviroment.api}/Il/getIller`).subscribe((res: any) => {\n      this.iller.next(res.data);\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}