{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport { enviroment } from 'src/environments/enviroment';\nimport { Otel } from '../models/Otel';\nimport { OtelKullanici } from '../models/OtelKullanici';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nexport class AuthService {\n  constructor(http, router) {\n    this.http = http;\n    this.router = router;\n    this.kullanici = new BehaviorSubject(new OtelKullanici());\n    this.otel = new BehaviorSubject(new Otel());\n  }\n  ngOnInit() {}\n  login(otelKullanici) {\n    this.http.post(`${enviroment.api}/OtelKullanici/getOtelKullanici`, otelKullanici).subscribe(res => {\n      if (res.durum) {\n        console.log(res);\n        this.kullanici.next(res.data);\n        this.otel.next(res.data.otel);\n        localStorage.setItem('user', JSON.stringify(res.data));\n        this.router.navigate(['main']);\n      } else {}\n    });\n  }\n  signup(otelKullanici) {\n    this.http.post(`${enviroment.api}/OtelKullanici/addOtelKullanici`, otelKullanici).subscribe(res => {\n      console.log(res);\n      this.router.navigate(['login']);\n    });\n  }\n  logout() {\n    localStorage.removeItem('user');\n  }\n}\nAuthService.ɵfac = function AuthService_Factory(t) {\n  return new (t || AuthService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.Router));\n};\nAuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthService,\n  factory: AuthService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAGA,SAASA,eAAe,QAAQ,MAAM;AACtC,SAASC,UAAU,QAAQ,6BAA6B;AACxD,SAASC,IAAI,QAAQ,gBAAgB;AACrC,SAASC,aAAa,QAAQ,yBAAyB;;;;AAGvD,OAAM,MAAOC,WAAW;EAItBC,YAAoBC,IAAgB,EAAUC,MAAc;IAAxC,SAAI,GAAJD,IAAI;IAAsB,WAAM,GAANC,MAAM;IAHpD,cAAS,GAAG,IAAIP,eAAe,CAAgB,IAAIG,aAAa,EAAE,CAAC;IACnE,SAAI,GAAG,IAAIH,eAAe,CAAO,IAAIE,IAAI,EAAE,CAAC;EAEmB;EAE/DM,QAAQ,IAAU;EAElBC,KAAK,CAACC,aAA4B;IAChC,IAAI,CAACJ,IAAI,CACNK,IAAI,CAAC,GAAGV,UAAU,CAACW,GAAG,iCAAiC,EAAEF,aAAa,CAAC,CACvEG,SAAS,CAAEC,GAAQ,IAAI;MACtB,IAAIA,GAAG,CAACC,KAAK,EAAE;QACbC,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC;QAChB,IAAI,CAACI,SAAS,CAACC,IAAI,CAACL,GAAG,CAACM,IAAI,CAAC;QAC7B,IAAI,CAACC,IAAI,CAACF,IAAI,CAACL,GAAG,CAACM,IAAI,CAACC,IAAI,CAAC;QAC7BC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACX,GAAG,CAACM,IAAI,CAAC,CAAC;QACtD,IAAI,CAACb,MAAM,CAACmB,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC;OAC/B,MAAM;IAET,CAAC,CAAC;EACN;EAEAC,MAAM,CAACjB,aAA4B;IACjC,IAAI,CAACJ,IAAI,CACNK,IAAI,CAAC,GAAGV,UAAU,CAACW,GAAG,iCAAiC,EAAEF,aAAa,CAAC,CACvEG,SAAS,CAAEC,GAAG,IAAI;MACjBE,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC;MAChB,IAAI,CAACP,MAAM,CAACmB,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;IACjC,CAAC,CAAC;EACN;EAEAE,MAAM;IACJN,YAAY,CAACO,UAAU,CAAC,MAAM,CAAC;EACjC;;AAlCWzB,WAAW;mBAAXA,WAAW;AAAA;AAAXA,WAAW;SAAXA,WAAW;EAAA0B,SAAX1B,WAAW;EAAA2B,YADE;AAAM","names":["BehaviorSubject","enviroment","Otel","OtelKullanici","AuthService","constructor","http","router","ngOnInit","login","otelKullanici","post","api","subscribe","res","durum","console","log","kullanici","next","data","otel","localStorage","setItem","JSON","stringify","navigate","signup","logout","removeItem","factory","providedIn"],"sourceRoot":"","sources":["/Users/mohammadrezakhorasanchian/Development/Angular/Otel-Rezervasyon-Admin/src/app/services/Auth.service.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Injectable, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { BehaviorSubject } from 'rxjs';\nimport { enviroment } from 'src/environments/enviroment';\nimport { Otel } from '../models/Otel';\nimport { OtelKullanici } from '../models/OtelKullanici';\n\n@Injectable({ providedIn: 'root' })\nexport class AuthService implements OnInit {\n  kullanici = new BehaviorSubject<OtelKullanici>(new OtelKullanici());\n  otel = new BehaviorSubject<Otel>(new Otel());\n\n  constructor(private http: HttpClient, private router: Router) {}\n\n  ngOnInit(): void {}\n\n  login(otelKullanici: OtelKullanici) {\n    this.http\n      .post(`${enviroment.api}/OtelKullanici/getOtelKullanici`, otelKullanici)\n      .subscribe((res: any) => {\n        if (res.durum) {\n          console.log(res);\n          this.kullanici.next(res.data);\n          this.otel.next(res.data.otel);\n          localStorage.setItem('user', JSON.stringify(res.data));\n          this.router.navigate(['main']);\n        } else {\n        }\n      });\n  }\n\n  signup(otelKullanici: OtelKullanici) {\n    this.http\n      .post(`${enviroment.api}/OtelKullanici/addOtelKullanici`, otelKullanici)\n      .subscribe((res) => {\n        console.log(res);\n        this.router.navigate(['login']);\n      });\n  }\n\n  logout() {\n    localStorage.removeItem('user');\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}